/*!
 * jQuery PDF Pager, v0.9, June 30, 2011
 * 
 * Copyright 2011, Jason Crane
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */
(function($){$.pdfPager=function(element,options){var settings={pdfFolder:"",pages:null,viewerBaseUrl:"http://docs.google.com/viewer?embedded=true&url=",startPage:1,config:null,onChange:function(){},namespace:""};var plugin=this;plugin.settings={};var $element=$(element);var namespace,url,$el=this,isClickEvent=false;function createNav(){var wrapper=$element.wrap('<div id="'+namespace+'-wrapper" />'),width=$element.width(),nav=$('<div id="'+namespace+'-pdf-nav" class="pdf-nav" style="width: '+width+'px" />'),prevLink=$('<a id="'+namespace+'-prev" class="pdf-nav-link pdf-prev" href="#"/>'),nextLink=$('<a id="'+namespace+'-next" class="pdf-nav-link pdf-next" href="#"/>'),input=$('<input id="'+namespace+'-page-input" type="text" class="page-input" value="'+settings.startPage+'" />'),total=$('<span id="total-pages">'+settings.pages+"</span>");prevLink.append("<span>&laquo; Previous</span>");nextLink.append("<span>Next &raquo;</span>");nav.append(prevLink,input," of ",total,nextLink);nav.insertBefore($element)}function clickHandler(e,$this){e.preventDefault();var isPrev,adjustment,navAlertText;if($this.attr("id")===namespace+"-prev"){isPrev=true;adjustment=-1;navAlertText="You're already viewing the first page."}if($this.attr("id")===namespace+"-next"){isPrev=false;adjustment=1;navAlertText="You're already viewing the last page."}var currPage=$element.data("currPage");if(currPage===1&&isPrev===true||currPage===settings.pages.toString()&&isPrev===false){alert(navAlertText);return false}else{currPage=parseFloat(currPage)+adjustment;var currPageStr=currPage.toString();$element.attr("src",url+currPageStr+".pdf").data("currPage",currPage);isClickEvent=true;$("#"+namespace+"-page-input").val(currPage);settings.onChange.call(this);isClickEvent=false}}function handleEvents(){$(".pdf-nav-link","#"+namespace+"-pdf-nav").live("click."+namespace,function(e){clickHandler(e,$(this))});$("#"+namespace+"-page-input").live("change",function(){if(isClickEvent)return;var $this=$(this);var val=$this.val();var valNum=parseFloat(val);isClickEvent=false;if(valNum>0&&valNum<=settings.pages){$element.attr("src",url+val+".pdf");$element.data("currPage",valNum);settings.onChange.call(this)}else{$this.val($element.data("currPage"));alert("Please enter a page number between 1 and "+settings.pages+" to view that page.")}})}plugin.init=function(){if(!options)return;$.extend(settings,options);if(settings.namespace.length)namespace=settings.namespace;else namespace=element.id;url=settings.viewerBaseUrl+settings.pdfFolder+"/";$element.attr("src",url+settings.startPage.toString()+".pdf").data("currPage",settings.startPage);createNav();handleEvents()};function getConfig(){$.getJSON(options.config,function(data){if(data.pages)data.pages=parseFloat(data.pages);$.extend(settings,data);plugin.init()})}if(options.config)getConfig();else plugin.init()};$.fn.pdfPager=function(options){return this.each(function(){if(undefined===$(this).data("pdfPager")){var plugin=new $.pdfPager(this,options);$(this).data("pdfPager",plugin)}})}})(jQuery);